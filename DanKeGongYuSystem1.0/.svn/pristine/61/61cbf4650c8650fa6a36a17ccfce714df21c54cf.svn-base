<%@ page language="java" contentType="text/html; charset=utf-8"
    pageEncoding="utf-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
    <meta charset="UTF-8"/>
    <title>个人房屋出租_房屋出租信息_公寓出租-蛋壳公寓官网</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name='keywords' content='月租,年租,租房,租期,蛋壳公寓,房租'>
    <meta name="description"
          content="让租房变得简单和快乐"/>
    <link rel="icon" type="image/x-icon" href="favicon.ico" >
    <!-- Set render engine for multi engine browser -->
    <meta name="renderer" content="webkit">
    <!-- Disable Baidu Siteapp -->
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <link media="all" type="text/css" rel="stylesheet" href="css/bootstrap-ec3bb52a00.min.css" >

<!--     <link media="all" type="text/css" rel="stylesheet" href="css/swiper-0b941af5db.min.css" > -->

    <link media="all" type="text/css" rel="stylesheet" href="css/common-4ce4e00253.css" >


<!--     <script src="js/js/jquery-888d4551b8.js" ></script> -->

<!--     <script src="js/js/js/bootstrap-5869c96cc8.min.js" ></script> -->
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script src="js/js/swiper-3-cd2bffb7f2.3.1.min.js" ></script>

    <script src="js/js/md5-ea27c6f755.min.js" ></script>

    <script src="js/js/city-b83380172d.js" ></script>

<!--     <script src="js/js/public-0fd418fb37.js" ></script> -->

    <script src="js/js/sa-56cab3188f.js" ></script>

<!--     <script src="js/js/sa-method-b38d9d9979.js" ></script> -->

        <link media="all" type="text/css" rel="stylesheet" href="css/login-4e8061fd30.css" >

    <script src="js/js/poup-09013e9343.js" ></script>

        <script>
        var id = '';
        $.ajax({
            type: 'GET',
            url: '/web-api/user/info',
            async: false,
            error: function(msg) {
                console.log(msg)
            },
            success: function(data) {
               id = data.data.mobile || '';
            },
        })

        sa.register({
            'platformType': 'PC',
            'pid': 'dankegongyu_customer',
            'cid': 'bj',
            'ucid': id,
            'uuid': id,
            'ssid': id,
            'lmei': '',
            'android_id': '',
            'idfa': '',
            'idfv': '',
            'mac_id': '',
        });
        $(function () {
            $('.nav-owner').click(function () {
                saMethod.ClickingHomepage('月租', $(this).attr('key') || '', '', '')
            })
        })

        // sa.quick('autoTrack');

       function GetUrlParam(paraName) {
    	   var url = document.location.toString();
           var arrObj = url.split("?");
           
           if (arrObj.length > 1) {
        	   var arrPara = arrObj[1].split("&");
               var arr;

           for (var i = 0; i < arrPara.length; i++) {
        	   arr = arrPara[i].split("=");

        	   if (arr != null && arr[0] == paraName) {
        		   return arr[1];
        	   }
           }
           return "";
           }else {
        	   return "";
        	   }
   }
    </script>
    </head>


<!--[if lte IE 8]>
<script src="js/html5shiv-0ce8f35589.js" ></script>

<script src="js/respond-972b9d5576.min.js" ></script>

<![endif]-->

<!--[if lt IE 8]>
<div class="alert-danger text-center">您正在使用<strong>过时</strong>的浏览器，本网站不能很好的支持。
    <a href="javascript:if(confirm(%27http://browser.qq.com/  \n\nThis file was not retrieved by Teleport Ultra, because it is addressed on a domain or path outside the boundaries set for its Starting Address.  \n\nDo you want to open it from the server?%27))window.location=%27http://browser.qq.com/%27" >立即使用最新QQ浏览器</a> 获得更好的使用体验！
</div>
<![endif]-->

<body>
<input type="hidden" value="400-110-1027" id="zjhPhoneNumber">
<input type="hidden" value="bj" name="website-city-code">
<input type="hidden" value="首页" name="website-page-name">
<div class="danke_header" id="topbar" data-spy="affix"  data-offset-top="32">
    <div class="wibsite-center header-center">
        <div class="logo fl">
            <a href="index.htm" ><img src="img/public-20180112-FgKd1DNNCyC_3Jq8dqbMIX7oCLCA.png" title="蛋壳公寓官网" alt="蛋壳公寓官网"></a>
            <h2 style="display: none;">蛋壳公寓官网，租房，整租，合租</h2>
        </div>
        <div class="nav-help fl"></div>
        <div class="fl dkcity hd-sprite-ab">
            <span id="dropdownMenu1" data-toggle="dropdown"><i></i>北京</span>
            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                                    <li><a href="javascript:void(0)" rel="bj">北京市</a></li>
                                    <li><a href="javascript:void(0)" rel="sz">深圳市</a></li>
                                    <li><a href="javascript:void(0)" rel="sh">上海市</a></li>
                                    <li><a href="javascript:void(0)" rel="hz">杭州市</a></li>
                                    <li><a href="javascript:void(0)" rel="tj">天津市</a></li>
                                    <li><a href="javascript:void(0)" rel="wh">武汉市</a></li>
                                    <li><a href="javascript:void(0)" rel="nj">南京市</a></li>
                                    <li><a href="javascript:void(0)" rel="gz">广州市</a></li>
                                    <li><a href="javascript:void(0)" rel="cd">成都市</a></li>
                            </ul>
        </div>
        <div class="nav fl">
            <a href="index.htm" data-subject="首页">首页</a>
            <a href="bj.htm" data-subject="找房">找房</a>
            <a href="bj-rent_type=joint_rent.htm" data-subject="合租">合租</a>
            <a href="bj-rent_type=entire_rent.htm" data-subject="整租">整租</a>
            <a href="bj-rent_cycle=1.htm" data-subject="月租" class="nav-owner">
                月租
                <img src="img/public-20181023-FrvoseweQ_uceNX0PxMSF5RVsd6M.png" alt="业主图标" class="owner-gray-icon">
            </a>
            <a href="yezhu.html" data-subject="业主">业主</a>
            <a href="aboutus.html" data-subject="关于">关于</a>
        </div>
                    <a class="dklogin fr" href="login.html" >登录</a>
                <div class="dkphone fr">
            <div class="serphoen fl hd-sprite-ab">
                <label></label>
                <span>服务时间：09:00 ~ 21:00</span>
            </div>
        </div>
    </div>
</div>
<div class="right-fixed">
    <div class="fixed-wrapper">
        <div class="scroll-to-top">
            <a href="javascript:void(0)" target="_parent"></a>
        </div>
        <div class="scroll-to-app">
            <a href="javascript:void(0)"></a>
            <div>
                <span></span>
                <img src="img/public-20180724-FvFKon429iKW8-oJFhggv0NQk_cH.png" style="width: 95px;height: 95px" alt="app下载">
                <p>扫描下载蛋壳APP</p>
            </div>
        </div>
        <div class="scroll-to-phone">
            <a href="javascript:void(0)"></a>
            <div>
                <img src="img/public-20180519-Fq8UiGCwbNXfmt4u4-DDZLkzBEQN.png" alt="客服电话图片">
                <span>400-110-1027</span>
            </div>
        </div>
        <div class="scroll-to-xcx">
            <a href="javascript:void(0)"></a>
            <div>
                <span class="xcx-close"></span>
                <span></span>
                <img src="img/public-20180606-Fma_F2IgLSK0VW-TZVo5UokQpm6w.jpg" style="width:95px;height:95px" alt="app下载">
                <p>小程序找房更容易</p>
            </div>
        </div>
    </div>
</div>
<div class="website-main">
        <div class="p-login">
        <div class="login-wrap">
            <div class="login-banner w1035">
                <!--form-->
                <div class="login-form">
                    <!--model name-->
                    <h3 class="login-name"><span>登录</span></h3>
                    <!--form list-->
                    <div class="login-ipt-box js-login-box">
                        <div class="login-ipt type-phone">
                            <input class="ipt-phone js-phone" data-limit="number" autocomplete="on" type="text"
                                   maxlength="11" oninput placeholder="请输入手机号"/>
                            <script>
                                $('.ipt-phone.js-phone').click(function () {
                                    saMethod.ClickPhoneInput('登录页 ')
                                })
                            </script>
                        </div>
                        <div class="login-ipt code-line type-code">
                            <input class="ipt-code js-code" data-limit="number" type="text" placeholder="请输入短信验证码"/>
                            <input class="code-btn js-code-btn"id="btn" type="button" value="获取验证码" onclick="sendMessage()"/>
                        </div>
                        <p class="ipt-err js-ipt-err"></p>
                    </div>
                    <!--form list end-->
                    <!--条款-->
                    <div class="login-clause rel">
                        <label>
                            <input class="create js-state" checked="checked" type="checkbox" value=""/>
                            我已阅读并同意《<a target="_blank" href="javascript:if(confirm(%27http://www.dankegongyu.com/zhuanti/user-privacy  \n\nThis file was not retrieved by Teleport Ultra, because it was unavailable, or its retrieval was aborted, or the project was stopped too soon.  \n\nDo you want to open it from the server?%27))window.location=%27http://www.dankegongyu.com/zhuanti/user-privacy%27" >用户使用条款与隐私声明</a>》
                        </label>
                        <p class="clause-err abs">请勾选租客协议</p>
                    </div>
                    <!--条款 end-->
                    <div class="login-btn">
                        <a class="js-login-btn" href="javascript:;">登录</a>
                    </div>
                </div>
                <!--form end-->
            </div>
            <!--banner end-->
        </div>
        <!--wrap end-->
    </div>
</div>
<div class="footer">
    <div class="website-help">
        <div class="wibsite-center">
            <div class="website-f-list">
                <span>用户帮助</span>
                <p><a href="notice.html" >入住指南</a></p>
                <p><a href="20180111lifeHacks.htm" target="_blank">生活常识</a></p>
                <p><a href="problem.html" target="_blank">租房问题</a></p>
            </div>
            <div class="website-f-list">
                <span>商务合作</span>
                <p><a href="20171219Styleforum.htm" target="_blank">商务合作</a></p>
            </div>
            <div class="website-f-list">
                <span>公司信息</span>
                <p><a href="aboutus.html" target="_blank">关于蛋壳</a></p>
                <p><a href="contact.html" target="_blank">联系蛋壳</a></p>
                <p><a href="join.html" target="_blank">加入蛋壳</a></p>
            </div>
            <div class="website-f-list">
                <span>客服热线</span>
                <p>4001-551-551</p>
                <p class="time">工作日 09:00-21:00</p>
            </div>
            <div class="website-f-right">
                <div class="website-f-pic">
                    <img src="img/public-20180702-FlfqqYRpjYyFKdRUiJMD8b6RO02m.png" title="下载蛋壳公寓APP" alt="下载蛋壳公寓APP">
                    <p>扫码小程序找房</p>
                </div>
                <div class="website-f-pic">
                    <img src="img/public-20180724-FvFKon429iKW8-oJFhggv0NQk_cH.png" style="padding:0;" title="下载蛋壳公寓APP" alt="下载蛋壳公寓APP">
                    <p>下载蛋壳公寓APP</p>
                </div>
                <div class="website-f-pic">
                    <img src="img/public-20180104-FuHnSFKo71wRSuJSK4Z0pt6l76zh.png" title="关注蛋壳公寓官方微信" alt="关注蛋壳公寓官方微信">
                    <p>关注微信公众号</p>
                </div>
            </div>
        </div>
    </div>
    <div class="crumbs">
        <div class="crumbs-classify">
            <a class="crumbs-sel" code="city" href="javascript:;">城市租房</a>
            <a href="javascript:;" code="dirc" >城区租房</a>
            <a href="javascript:;" code="block">商圈租房</a>
            <a href="javascript:;" code="plot">小区租房</a>
        </div>
        <div>
            <div class="crumbs-list city">
                
            </div>
            <div class="crumbs-list dirc" style="display:none">
            
            </div>
            <div class="crumbs-list block" style="display:none">
                
            </div>
            <div class="crumbs-list plot" style="display:none">
                
            </div>
        </div>
    </div>
    <div class="copy-right">
        <div class="wibsite-center">
            <div class="footer-logo">
                <a href="index.htm" >
                    <img src="img/public-20180702-FkLmdf41L0FSNAktybhKBxCs7ztn.png" alt="蛋壳公寓">
                </a>
            </div>
            <div class="copy-right-text">
                <div>© 2018 蛋壳公寓 京ICP备15009197号-1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;京公网安备 11010102001946号</div>
                <div>紫梧桐（北京）资产管理有限公司&nbsp;&nbsp;|&nbsp;&nbsp;地址：北京市东城区朝阳门内大街8号朝阳首府2层212 </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
	  /*退出登录*/
	
	$(".dklogout").on("click",function(){
        $.ajaxSetup({
    headers: {
        'X-CSRF-TOKEN': 'FDJseVBN5iOes3XlWCXJkMTnDQAlIwgIpdiubDAR'
    },
    cache: false,
    async: false,
});;
        $.ajax({
            url:'/web-api/user/logout',
            type:"POST",
            success:function(data){
                location.reload()
            },
            error:function(err){
                console.log(err);
            }
        })
    })
    
    $('.dklogined-wrapper').hover(function () {
        $('.dklogined-center').show()
        $('.dklogined').css('background', 'url(https://public.wutongwan.org/public-20180519-FqitD4IbypL6rbHSVa_yq4iSsaQE)')
    }, function () {
        $('.dklogined-center').hide()
        $('.dklogined').css('background', 'url(https://public.wutongwan.org/public-20180519-FtfmOHVmUq7-6Tzol_cyQBE9yt3y)')
    })

    $('.scroll-to-phone').hover(function () {
        $('.scroll-to-phone div').show()
        $('.scroll-to-xcx div').hide()
        $('.xcx-close').hide()
    }, function () {
        $('.scroll-to-phone div').hide()
    })

    $('.scroll-to-app').hover(function () {
        $('.scroll-to-app div').show()
        $('.scroll-to-xcx div').hide()
        $('.scroll-to-app a').css('background-color', '#3dbcc6')
        $('.xcx-close').hide()
    }, function () {
        $('.scroll-to-app div').hide()
        $('.scroll-to-app a').css('background-color', '#333333')
    })

    $('.scroll-to-xcx').hover(function () {
        $('.scroll-to-xcx div').show()
        $('.scroll-to-xcx a').css('background-color', '#3dbcc6')
    }, function () {
        $('.scroll-to-xcx div').hide()
        $('.scroll-to-xcx a').css('background-color', '#333333')
        $('.xcx-close').hide()
    })

    $('.xcx-close').on('click', function () {
        $('.scroll-to-xcx div').hide()
        $('.xcx-close').hide()
    })

    $('.crumbs-classify a').on('click', function () {
        $(this).addClass('crumbs-sel')
        $(this).siblings().removeClass('crumbs-sel')

        var code = '.crumbs-list.' + $(this).attr('code')
        $(code).show()
        $(code).siblings().hide()
    })

    
    getCityList('北京', 'bj')
    getDircList('北京', 'bj', '')
    getBlockList('北京', 'bj', '')
    getPlotList('北京', 'bj', '')              

</script>
<!--APP推广层 end-->
    <script type="text/javascript">
        var webApi = "/web-api"
        //正则判断
        var _regexp = {
            isPhone: function (val) {
                var reg = /^[1][3-8][0-9]{9}$/;
                return reg.test(val);
            }
        };

        function isEmptyObj(obj) {
            var name;
            for (name in obj) {
                return false;
            }
            return true;
        }
        function inputLimit() {
            var This = this,
                    type = $(this).attr("data-limit"),
                    reg, ret = "",
                    noNumber = /\D/g;
            noNumLetter = /[^a-zA-z0-9]/g;
            setTimeout(function () {
                switch (type) {
                    case "number":
                        reg = noNumber;
                        break;
                    case "numletter":
                        reg = noNumLetter;
                        break;
                }
                This.value = This.value.replace(reg, ret);
            }, 0)
        }


        var pageLogin = {
            init: function () {
                this.eventFn();
            },
            data: {
                //错误提示text
                errtxt: {
                    1: "验证码不能为空",
                    2: "验证码输入不正确",
                    3: "手机号码不能为空",
                    4: "手机号码输入不正确",
                    5: "图片验证码不能为空",
                    6: "图片验证码输入不正确"
                },
                imgCode: null,
                code: null,
                errEle: $(".js-ipt-err"),
                phoneEle: $(".js-phone"),
                codeEle: $(".js-code"),
                codeImgEle: $(".js-img-code"),
                loginBoxEle: $(".js-login-box"),
                imgCodeEle: $(".js-img-code"),
                stateEle: $(".js-state")

            },
            /*事件函数*/
            eventFn: function () {
                var self = this,
                        timer,
                        codeFn, keyFn = function () {
                            if (this.value != "") {
                                $(this).parents(".login-ipt").removeClass("error");
                            }
                        },
                        errtxt = this.data.errtxt,
                        $loginBox = this.data.loginBoxEle,
                        $phone = this.data.phoneEle,
                        $code = this.data.codeEle,
                        $imgCode = this.data.codeImgEle,
                        $state = this.data.stateEle,
                        $err = this.data.errEle;


                /*获取验证码事件监听*/
                $(".js-code-btn").on("click", function () {

                    var This = this,
                            phone = self.checkPhone(),
                            imgCode = self.checkImgCode(),
                            imgCodeFn = function () {
                                //图片验证弹出层
                                new pop({
                                    type: "layer-code",
                                    title: "请输入图片所示内容",
                                    content: '<a class="js-img img-code"><img src="/get-img-code/400/140?mobile=' + $phone.val() + '&time=' + new Date().getTime() + '"  /></a><input class="ipt-img-code js-img-code" data-limit="numletter"  type="text" placeholder="请输入图片验证码" /><p class="img-err js-img-err center">图片验证码输入错误</p>',
                                    btn: "确定",
                                    callBack0: function () {
                                        $(This).removeClass("disabled");
                                    },
                                    callBack1: function (obj) {
                                        var checkImg = self.checkImgCode();
                                        if (isEmptyObj(checkImg)) {
                                            //发送验证码
                                            reqCode();
                                            // 关闭弹层
                                            obj.closed();
                                            $(This).removeClass("disabled");
                                        } else {
                                            //图片验证码错误
                                            $(".js-img-err").html(errtxt[checkImg.errIndex]).parents(".layer-code").addClass("notpass");
                                            //刷新验证码
                                            self.reImgCode(true)
                                        }
                                        return false;
                                    },
                                    initFn: function () {
                                        //弹框初始化事件

                                        $(".js-img").on("click", function () {
                                            //刷新验证码
                                            self.reImgCode(true)
                                        })
                                        //限制输入字符类型  type设置 在html tag中添加data-limit属性
                                        $(".js-img-code").on("keydown", inputLimit)
                                    }
                                })

                            },
                            result = {};

                    //手机号验证
                    if (!!phone.num) {
                        result = phone;
                    }
                    // 验证不通过
                    if (result.num) {
                        $loginBox.addClass("notpass");
                        $err.html(errtxt[result.errIndex]);
                        self.reImgCode();
                        return false;
                    }
                    //禁止重复点击
                    if ($(This).hasClass("disabled")) {
                        return false
                    }
                    $(This).addClass("disabled");
                    /*************验证通过 发起请求验证码************/
                    reqCode()
                    function reqCode() {
                        $.ajaxSetup({
    headers: {
        'X-CSRF-TOKEN': 'FDJseVBN5iOes3XlWCXJkMTnDQAlIwgIpdiubDAR'
    },
    cache: false,
    async: false,
});;
                        $.ajax({
                            url: webApi + "/user/send-text-verify-code",
                            type: "POST",
                            dataType: "json",
                            data: {
                                mobile: $phone.val()
                            },
                            success: function (data) {
                                if (data.code === 1500) {
                                    imgCodeFn();
                                    return false;
                                }
                                //获取验证码
                                self.data.code = data.msg;
                                codeFn = self.msgCode({
                                    obj: This,
                                    lasttime: 60
                                })
                                saMethod.GetVerifyingCode('登录页', '注册/登录', true)
                            },
                            error: function () {
                                saMethod.GetVerifyingCode('登录页', '注册/登录', false)
                            }
                        })
                    }
                })

                /*登陆事件监听*/
                $(".js-login-btn").on("click", function () {
                    var This = this;
                    if ($(This).hasClass("disabled")) {
                        return false
                    }
                    $(This).addClass("disabled");

                    /**************验证开始**************/
                    if (!$state[0].checked) {
                        $(".clause-err").fadeIn(200);
                        $loginBox.removeClass("notpass");
                        setTimeout(function () {
                            $(This).removeClass("disabled");
                        }, 300)
                        clearTimeout(timer);
                        timer = setTimeout(function () {
                            $(".clause-err").hide();
                        }, 2000);
                        return false;
                    }

                    var phone = self.checkPhone(),
                            code = self.checkCode(),
                            result = {};

                    //短信验证码
                    if (!!code.num) {
                        result = code;
                    }
                    //手机号验证
                    if (!!phone.num) {
                        result = phone;
                    }

                    // 验证不通过
                    if (result.num) {
                        $loginBox.addClass("notpass");
                        $err.html(errtxt[result.errIndex]);
                        setTimeout(function () {
                            $(This).removeClass("disabled");
                        }, 300)
                        return false;
                    }
                    /*************验证通过 发起登陆************/
                    opt = {
                        mobile: $phone.val(),
                        verify_code: $code.val()
                    }
                    $.ajaxSetup({
    headers: {
        'X-CSRF-TOKEN': 'FDJseVBN5iOes3XlWCXJkMTnDQAlIwgIpdiubDAR'
    },
    cache: false,
    async: false,
});;
                    $.ajax({
                        url: webApi + "/user/login",
                        type: "POST",
                        dataType: "json",
                        data: opt,
                        success: function (data) {
                            if (!data.success) {
                                $loginBox.addClass("notpass");
                                $err.html(data.msg);
                                if (data.msg === "短信验证码错误") {
                                    $code.parent(".login-ipt").addClass("error")
                                }
                                setTimeout(function () {
                                    $(This).removeClass("disabled");
                                }, 300)
                                return false;
                            }
                            saMethod.signUp('登录频道', '手机号注册', '')
                            $.ajax({
                                type: 'GET',
                                url: '/web-api/user/info',
                                async: false,
                                error: function (msg) {
                                    console.log(msg)
                                },
                                success: function (data) {
                                    sa.login(data.data.mobile)
                                },
                            })

                            var collect = GetUrlParam('collect')

                            if (collect) {
                                var href = localStorage.getItem("href")
                                location.href = href + '?collect=true';
                                return
                            }

                            location = "https://www.dankegongyu.com/user-center/index.html";
                        }
                    });

                })
                /*键盘输入事件*/
                $(".js-code,.js-phone").on("keyup", keyFn)
                $(".js-code,.js-phone").on("keydown", keyFn)
                //限制输入字符类型  type设置 在html tag中添加data-limit属性
                $("[data-limit]").on("keydown", inputLimit)
                /*回车登陆*/
                $(document).on("keypress", function (e) {
                    if (e.keyCode == "13") {
                        if ($(".layer-code").length) {
                            $(".js-btn1").trigger("click");
                        } else {
                            $('.js-login-btn').trigger('click');
                        }
                    }
                })


                //更换图片验证码
                $(".js-img").on("click", function () {
                    //刷新验证码
                    self.reImgCode(true)
                })
            },
            /**
             * [检测短信验证码]
             * @return  {Object} result = {num,errIndex} or {}  返回值不等于空对象则输入错误
             * */
            checkCode: function () {
                var self = this,
                        $code = self.data.codeEle,
                        $imgCode = self.data.imgCodeEle,
                        result = {};
                //短信验证码空判断 && 验证码判断
                if ($code.val() === "") {
                    result.num = 1;
                    $code.parents(".login-ipt").addClass("error");
                    result.errIndex = 1;
                }
                return result;
            },
            /**
             * [检测手机号]
             * @return  {Object} result = {num,errIndex} or {}  返回值不等于空对象则输入错误
             * */
            checkPhone: function () {
                var self = this,
                        $phone = self.data.phoneEle,
                        result = {}
                if ($phone.val() === "" || !_regexp.isPhone($phone.val())) {
                    result.num = 1;
                    result.errIndex = $phone.val() === "" ? 3 : 4;
                    $phone.parents(".login-ipt").addClass("error");
                }
                return result
            },
            /**
             * [同步验证图片验证码]
             * @return  {Object} result = {num,errIndex} or {} 返回值不等于空对象则输入错误
             */
            checkImgCode: function () {
                var self = this,
                        $phone = self.data.phoneEle,
                        $imgCode = $(".js-img-code"),
                        result = {},
                        opt;

                //图片验证码空判断 && 验证码判断
                if ($imgCode.val() === "") {
                    result.num = 1;
                    result.errIndex = 5;
                    return result;
                }

                //验证图片验证码
                opt = {
                    mobile: $phone.val(),
                    verify_code: $imgCode.val()
                }
                $.ajaxSetup({
    headers: {
        'X-CSRF-TOKEN': 'FDJseVBN5iOes3XlWCXJkMTnDQAlIwgIpdiubDAR'
    },
    cache: false,
    async: false,
});;
                $.ajax({
                    url: webApi + "/user/img-code",
                    type: "POST",
                    dataType: "json",
                    async: false,
                    data: opt,
                    success: function (data) {
                        if (!data.success) {
                            result.num = 1;
                            result.errIndex = 6;
                        }
                    }
                });
                return result;
            },
            /**
             * [刷新图片验证码]
             */
            reImgCode: function (deep) {
                var self = this,
                        $phone = this.data.phoneEle;
                //显示图片验证码
                if (!deep && !!self.checkPhone().num) {
                    return false;
                }
                $(".js-img").html('<img src="/get-img-code/90/30?mobile=' + $phone.val() + '&time=' + new Date().getTime() + '"  />');
            },
            /**
             * 短信验证码函数
             * @public
            * @type  {Object} parmaete =>
             * @return  {Object} this => this.reset()
             */
            msgCode: function (paramete) {
                var obj = paramete["obj"], //按钮对象
                        time = paramete["lasttime"], //读秒剩余时间
                        miao = time,
                        timer, txt,
                        bggreen = paramete["c1"] || "",
                        bggray = paramete["c2"] || "disabled",
                        btnhui = $(obj).removeClass(bggreen).addClass(bggray),
                        txt = paramete["customTxt"] || "秒后重发",
                        defaultTxt = paramete["defaultTxt"] || "获取验证码",
                        reset = function () {
                            clearInterval(timer);
                            $(obj).prop("disabled", false);
                            $(obj).removeClass(bggray).addClass(bggreen).val(defaultTxt);
                        }
                //初始化发送按钮，清空初始化事件
                btnhui.val(miao + txt);
                $(obj).prop("disabled", true);
                //发送倒数读秒
                timer = setInterval(function () {
                    miao--;
                    btnhui.val(miao + txt);
                    if (miao == 0) {
                        reset();
                        if (paramete["callback"] != null && typeof paramete["callback"] == "function")paramete["callback"]();
                    }
                }, 1000);
                return {reset: reset}
            }
        }

        $(function () {
            pageLogin.init()
        })


        function GetUrlParam(paraName) {
            var url = document.location.toString();
            var arrObj = url.split("?");

            if (arrObj.length > 1) {
                var arrPara = arrObj[1].split("&");
                var arr;

                for (var i = 0; i < arrPara.length; i++) {
                    arr = arrPara[i].split("=");

                    if (arr != null && arr[0] == paraName) {
                        return arr[1];
                    }
                }
                return "";
            } else {
                return "";
            }
        }
        
        //
        var sms="";
        $("#btn").click(function(){
            var phone=$("#phone").val();
            if(phone!="")
            {
                $.ajax({
                    url:"${pageContext.request.contextPath}/SendSms",
                    type:"get",
                    data:{"phone":phone},
                    success:function(result){
                    	alert(result);
                        sms=result;
                    }
                });
            }else{
                 alert("请输入手机号");
                return false;
            }

        });
        $("#lo").click(function(){
            var code=$("#code").val();
            if(code==""){
                alert("请输入验证码");
            }else{
                if(sms==code){
                    window.location.href="success.jsp";
                }else{
                    alert("验证码错误");

                };
            };

        });

    </script>
</body>
</html>

